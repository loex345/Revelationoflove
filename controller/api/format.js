// {/* <script async type="module"> */}
let correctObj = {
    '1-1-5-A': 'a',
    '1-1-6-King': 'king',
    '1-2-1-this': 'this',
    '1-2-1.1-end': 'end',
    '1-2-2-witness': 'witness',
    '1-2-3-truth': 'truth',
    '1-3-2-Herod-s': 'herod',
    '1-3-3-miracle': 'miracle',
    '1-3-3-miracle-2': 'miracle',
    '1-3-4-sent': 'sent',
    '1-3-5-Pilate': 'pilate',
    '1-4-1-word': 'word',
    '1-4-2-truth': 'truth',
    '1-5-1-fear': 'fear',
    '1-5-2-Peace': 'peace',
    '1-5-3-you': 'you',
    '1-5-4-terrified': 'terrified',
    '1-5-5-affrighted': 'affrighted',
    '1-5-6-spirit': 'spirit',
    '1-6-1-handle': 'handle',
    '1-6-3-Word': 'word',
    '1-5-4-of': 'of',
    '1-6-5-Life': 'life',
    '1-6-1-see': 'see',
    '1-7-1-revealer': 'revealer',
    '1-7-2-revealeth': 'revealeth',
    '1-7-3-revealeth': 'revealeth',
    '1-7-4-manifest': 'manifest',
    '1-7-5-God': 'god',
    '1-7-6-sure': 'sure',
    '1-7-7-light': 'light',
    '1-7-8-dawn': 'dawn',
    '1-7-9-arise': 'arise',
    'Christ': 'christ',
    'tribute': 'tribute',
    'forbidding': 'forbidding',
    'perverting': 'perverting',
    '2-1-2-beginning': 'beginning',
    '2-1-3-convinced': 'convinced',
    '2-1-4-God': 'God',
    '2-2-3-in': 'in',
    '2-1-6-you': 'you',
    '2-1-7-sure': 'sure',
    '2-1-8-light': 'light',
    '2-2': 'dark',
    '2-1-11-third': 'third',
    '2-1-12-Judah': 'Judah',
    '2-1-13-Babylon': 'Babylon',
    '2-1-14-Daniel': 'Daniel',
    '2-1-15-purposed': 'purposed',
    '2-1-16-heart': 'heart',
    '2-1-17-meat': 'meat',
    '2-1-18-wine': 'wine',
    '2-1-19-wisdom': 'wisdom',
    '2-2-20-ten': 'ten',
    '2-1-10-hearts-2': 'hearts',
    '2-2-1-magicians': 'magicians',
    '2-2-2-astrologers': 'astrologers',
    '2-2-3-sorcerers': 'sorcerers',
    '2-2-4-tell': 'tell',
    '2-2-5-man': 'man',
    '2-2-6-none': 'none',
    '2-2-7-not': 'not',
    '2-2-8-desire': 'desire',
    '2-2-9-mercies': 'mercies',
    '2-2-10-thank': 'thank',
    '2-2-11-praise': 'praise',
    '2-2-13-God': 'God',
    '2-2-13-heaven': 'heaven',
    '2-2-14-image': 'image',
    '2-2-15-gold': 'gold',
    '2-2-16-silver': 'silver',
    '2-2-17-brass': 'brass',
    '2-2-18-iron': 'iron',
    '2-2-19-clay': 'clay',
    '2-2-20-stone': 'stone',
    '2-2-21-mountain': 'mountain',
    '2-3-1-Thou': 'Thou',
    '2-3-2-art': 'art',
    '2-3-3-kingdom': 'kingdom',
    '2-2-4-Medes': 'Medes',
    '2-2-5-Persians': 'Persians',
    '2-3-6-Grecia': 'Grecia',
    '2-3-7-strong': 'strong',
    '2-3-9-world': 'world',
    '2-3-8-Ceasar': 'Ceasar',
    '2-3-10-taxed': 'taxed',
    '2-3-11-divided': 'divided',
    '2-3-12-mingle': 'mingle',
    '2-3-13-not': 'not',
    '2-3-14-God': 'God',
    '2-3-15-heaven': 'heaven',
    '2-3-16-kingdom': 'kingdom',
    '2-3-17-consume': 'consume',
    '2-3-18-for': 'for',
    '2-3-19-ever': 'ever',
    '2-3-20-become': 'become',
    '2-3-21-Lord': 'Lord',
    '2-3-22-reign': 'reign',
    '2-3-22-reign-3': 'reign',
    '2-3-23-ever': 'ever',
    '2-3-24-God': 'God',
    '2-3-25-gods': 'gods',
    '2-3-26-Lord': 'Lord',
    '2-3-27-kings': 'kings',
    '2-4-1-will': 'will',
    '2-4-2-done': 'done',
    '2-4-3-seek': 'seek',
    '2-4-4-kingdom': 'kingdom',
    '2-4-5-righteousness': 'righteousness',
    '2-4-6-you': 'you',
    '2-4-7-Christ': 'Christ',
    '2-4-8-heaven': 'heaven',
    '2-4-9-saints': 'saints',
    '2-4-10-household': 'household',
    '2-1-1-end': 'end',
    '3-1-2-bruise': 'bruise',
    '3-1-3-skull': 'skull',
    '3-1-3-skull-2': 'skull',
    '3-3-1-Sanctuary': 'Sanctuary',
    '3-5-4-bread': 'bread',
    '3-5-1-himself': 'himself',
    '3-5-2-sprinkled': 'sprinkled',
    '3-5-3-washed': 'washed',
    '3-5-5-prayer': 'prayer',
    '3-5-6-light': 'light',
    '3-5-6.1-light': 'light',
    '3-5-7-men': 'men',
    '3-5-8-purifieth': 'purifieth',
    '3-5-9-blood': 'blood',

}

import { WfuUserInfo, WfuUser } from 'https://cdn.jsdelivr.net/gh/sygnaltech/webflow-util@4.2/src/modules/webflow-membership.js';
import { WfuDataBinder } from 'https://cdn.jsdelivr.net/gh/sygnaltech/webflow-util@4.2/src/modules/webflow-databind.min.js';

$(function () {
    var membership = new WfuUserInfo({
        userInfoUpdatedCallback: myCallback
    }).init();
});

async function myCallback(user) {
    // Automatic data-binding using attributes
    var dataBinder = new WfuDataBinder().bind();


    console.log(user.user_id_alt)

}


var userEmail;
var result;
const inputs = Array.from(document.querySelectorAll("input"));
var res;

const options = {
    method: "GET",
    credentials: "omit",
    headers: {
        'Content-Type': 'application/json'
    }
}

setTimeout(async (userEmail) => {

    userEmail = document.getElementById('email').value;
    console.log(userEmail, "users email")

    function saveData(userEmail) {
        console.log("I am working")
        return localStorage.setItem('email', userEmail);
    }
    saveData(userEmail);

    res = await fetch(`http://localhost:3000/api/lessons/${userEmail}/what-is-truth`, options);
    result = await res.json();

    /*    for (const key in result) {
                  if (input.name == key) {
        input.value = result[key]
    }
        } */

    for (const input of inputs) {
        if (input.name in result) {
            console.log(true, input.name)
            input.value = result[input.name];
        }
    }


}, 1000)




//To listen to save button
const ansIds = document.getElementById('ansButton')

ansIds.addEventListener("click", addTestValues)

function addTestValues() {
    const inputs = Array.from(document.querySelectorAll("input"))
    for (const input of inputs) {
        if (correctObj[input.name])
            input.value = correctObj[input.name]
    }
}
let saveButton = document.getElementById('savebtn')

saveButton.addEventListener('click', saveData)

function saveData() {
    console.log('I am clicked')
    // get all inputs from dom
    // const data = {"1-7-9-arise":"valueTwo","1-7-8-dawn":"valueThree"};

    const map = {};
    const inputs = Array.from(document.querySelectorAll("input"))
    for (const input of inputs) {
        map[input.name] = input.value;
    }

    console.log(map, "input data")
    let resSave;
    const options = {
        method: "POST",
        credentials: "omit",
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(map)
    }

    resSave = fetch(`http://localhost:3000/api/lessons/${localStorage.getItem('email')}/what-is-truth`, options);

    console.log(resSave)
    return resSave;
}
//</script>
